---
---

<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÁîªÂÉèÁîüÊàê„ÉÑ„Éº„É´</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
      }

      .container {
        background: white;
        padding: 40px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        max-width: 600px;
        width: 100%;
      }

      h1 {
        color: #333;
        margin-bottom: 30px;
        text-align: center;
        font-size: 2em;
      }

      .input-group {
        margin-bottom: 25px;
      }

      label {
        display: block;
        margin-bottom: 8px;
        color: #555;
        font-weight: 500;
      }

      input[type="number"] {
        width: 100%;
        padding: 12px;
        border: 2px solid #ddd;
        border-radius: 8px;
        font-size: 16px;
        transition: border-color 0.3s;
      }

      input[type="number"]:focus {
        outline: none;
        border-color: #667eea;
      }

      .dimensions-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
      }

      .color-group {
        margin-bottom: 25px;
      }

      .color-options {
        display: flex;
        gap: 15px;
        margin-top: 10px;
      }

      .color-option {
        display: flex;
        align-items: center;
        cursor: pointer;
      }

      .color-option input[type="radio"] {
        margin-right: 5px;
      }

      .color-picker-wrapper {
        margin-top: 10px;
        display: none;
      }

      #colorPicker {
        width: 100%;
        height: 50px;
        border: 2px solid #ddd;
        border-radius: 8px;
        cursor: pointer;
      }

      .button-group {
        display: flex;
        gap: 15px;
        margin-top: 30px;
      }

      button {
        flex: 1;
        padding: 14px 28px;
        font-size: 16px;
        font-weight: 600;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: transform 0.2s, box-shadow 0.2s;
      }

      button:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      #generateBtn {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
      }

      #downloadBtn {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        color: white;
      }

      #downloadBtn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
      }

      .canvas-container {
        margin-top: 30px;
        text-align: center;
        display: none;
      }

      #canvas {
        border: 2px solid #ddd;
        border-radius: 8px;
        max-width: 100%;
        height: auto;
      }

      .info {
        margin-top: 10px;
        color: #666;
        font-size: 14px;
      }

      .pattern-group {
        margin-bottom: 25px;
      }

      select {
        width: 100%;
        padding: 12px;
        border: 2px solid #ddd;
        border-radius: 8px;
        font-size: 16px;
        background: white;
        cursor: pointer;
      }

      select:focus {
        outline: none;
        border-color: #667eea;
      }

      input[type="text"], textarea {
        width: 100%;
        padding: 12px;
        border: 2px solid #ddd;
        border-radius: 8px;
        font-size: 16px;
        transition: border-color 0.3s;
      }

      input[type="text"]:focus, textarea:focus {
        outline: none;
        border-color: #667eea;
      }

      textarea {
        resize: vertical;
        min-height: 80px;
        font-family: inherit;
      }

      .text-settings {
        display: grid;
        grid-template-columns: 2fr 1fr 1fr;
        gap: 15px;
        margin-top: 10px;
      }

      .text-color-picker {
        width: 100%;
        height: 40px;
        border: 2px solid #ddd;
        border-radius: 8px;
        cursor: pointer;
      }

      .position-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
        margin-top: 10px;
      }

      .position-btn {
        padding: 10px;
        border: 2px solid #ddd;
        background: white;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s;
        font-size: 14px;
      }

      .position-btn:hover {
        border-color: #667eea;
        background: #f0f4ff;
      }

      .position-btn.active {
        border-color: #667eea;
        background: #667eea;
        color: white;
      }

      .aspect-ratio-group {
        margin-bottom: 25px;
      }

      .aspect-ratio-buttons {
        display: flex;
        gap: 10px;
        margin-top: 10px;
      }

      .aspect-btn {
        flex: 1;
        padding: 10px 15px;
        border: 2px solid #ddd;
        background: white;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s;
        font-size: 14px;
        font-weight: 500;
      }

      .aspect-btn:hover {
        border-color: #667eea;
        background: #f0f4ff;
        transform: translateY(-2px);
        box-shadow: 0 3px 10px rgba(102, 126, 234, 0.2);
      }

      .aspect-btn.active {
        border-color: #667eea;
        background: #667eea;
        color: white;
      }

      @media (max-width: 600px) {
        .container {
          padding: 20px;
        }

        .dimensions-row {
          grid-template-columns: 1fr;
        }

        .color-options {
          flex-direction: column;
        }

        .text-settings {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üé® ÁîªÂÉèÁîüÊàê„ÉÑ„Éº„É´</h1>
      
      <div class="dimensions-row">
        <div class="input-group">
          <label for="width">ÂπÖ (px)</label>
          <input type="number" id="width" min="1" max="4000" value="800" placeholder="‰æã: 800">
        </div>
        
        <div class="input-group">
          <label for="height">È´ò„Åï (px)</label>
          <input type="number" id="height" min="1" max="4000" value="600" placeholder="‰æã: 600">
        </div>
      </div>

      <div class="aspect-ratio-group">
        <label>„Ç¢„Çπ„Éö„ÇØ„ÉàÊØîÔºàÂπÖÂü∫Ê∫ñÔºâ</label>
        <div class="aspect-ratio-buttons">
          <button type="button" class="aspect-btn" data-ratio="16:9">16:9</button>
          <button type="button" class="aspect-btn" data-ratio="4:3">4:3</button>
          <button type="button" class="aspect-btn" data-ratio="1:1">1:1</button>
          <button type="button" class="aspect-btn" data-ratio="3:4">3:4</button>
        </div>
      </div>

      <div class="color-group">
        <label>ËÉåÊôØËâ≤</label>
        <div class="color-options">
          <label class="color-option">
            <input type="radio" name="bgType" value="gradient" checked>
            <span>„Ç∞„É©„Éá„Éº„Ç∑„Éß„É≥</span>
          </label>
          <label class="color-option">
            <input type="radio" name="bgType" value="solid">
            <span>ÂçòËâ≤</span>
          </label>
          <label class="color-option">
            <input type="radio" name="bgType" value="pattern">
            <span>„Éë„Çø„Éº„É≥</span>
          </label>
        </div>
        <div class="color-picker-wrapper" id="colorPickerWrapper">
          <input type="color" id="colorPicker" value="#667eea">
        </div>
      </div>

      <div class="pattern-group" id="patternGroup" style="display: none;">
        <label for="pattern">„Éë„Çø„Éº„É≥„ÇíÈÅ∏Êäû</label>
        <select id="pattern">
          <option value="dots">„Éâ„ÉÉ„Éà</option>
          <option value="stripes">„Çπ„Éà„É©„Ç§„Éó</option>
          <option value="grid">„Ç∞„É™„ÉÉ„Éâ</option>
          <option value="waves">Ê≥¢ÂΩ¢</option>
          <option value="circles">ÂÜÜ</option>
        </select>
      </div>

      <div class="input-group">
        <label for="customText">„ÉÜ„Ç≠„Çπ„ÉàÔºà„Ç™„Éó„Ç∑„Éß„É≥Ôºâ</label>
        <textarea id="customText" placeholder="ÁîªÂÉè„Å´Ë°®Á§∫„Åó„Åü„ÅÑ„ÉÜ„Ç≠„Çπ„Éà„ÇíÂÖ•Âäõ..."></textarea>
        <div class="text-settings">
          <select id="fontSize">
            <option value="16">16px</option>
            <option value="24">24px</option>
            <option value="32" selected>32px</option>
            <option value="48">48px</option>
            <option value="64">64px</option>
            <option value="72">72px</option>
            <option value="96">96px</option>
            <option value="128">128px</option>
          </select>
          <input type="color" id="textColor" class="text-color-picker" value="#ffffff">
          <select id="fontWeight">
            <option value="normal">Ê®ôÊ∫ñ</option>
            <option value="bold" selected>Â§™Â≠ó</option>
          </select>
        </div>
        <label style="margin-top: 15px; margin-bottom: 5px; display: block;">„ÉÜ„Ç≠„Çπ„Éà‰ΩçÁΩÆ</label>
        <div class="position-grid">
          <button type="button" class="position-btn" data-position="top-left">Â∑¶‰∏ä</button>
          <button type="button" class="position-btn" data-position="top-center">‰∏≠Â§Æ‰∏ä</button>
          <button type="button" class="position-btn" data-position="top-right">Âè≥‰∏ä</button>
          <button type="button" class="position-btn" data-position="middle-left">Â∑¶‰∏≠</button>
          <button type="button" class="position-btn active" data-position="middle-center">‰∏≠Â§Æ</button>
          <button type="button" class="position-btn" data-position="middle-right">Âè≥‰∏≠</button>
          <button type="button" class="position-btn" data-position="bottom-left">Â∑¶‰∏ã</button>
          <button type="button" class="position-btn" data-position="bottom-center">‰∏≠Â§Æ‰∏ã</button>
          <button type="button" class="position-btn" data-position="bottom-right">Âè≥‰∏ã</button>
        </div>
      </div>

      <div class="button-group">
        <button id="generateBtn">ÁîªÂÉè„ÇíÁîüÊàê</button>
        <button id="downloadBtn" disabled>„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ</button>
      </div>

      <div class="canvas-container" id="canvasContainer">
        <canvas id="canvas"></canvas>
        <div class="info" id="imageInfo"></div>
      </div>
    </div>

    <script>
      const canvas = document.getElementById('canvas');
      const ctx = canvas.getContext('2d');
      const generateBtn = document.getElementById('generateBtn');
      const downloadBtn = document.getElementById('downloadBtn');
      const widthInput = document.getElementById('width');
      const heightInput = document.getElementById('height');
      const canvasContainer = document.getElementById('canvasContainer');
      const imageInfo = document.getElementById('imageInfo');
      const colorPicker = document.getElementById('colorPicker');
      const colorPickerWrapper = document.getElementById('colorPickerWrapper');
      const patternGroup = document.getElementById('patternGroup');
      const patternSelect = document.getElementById('pattern');
      const customText = document.getElementById('customText');
      const fontSize = document.getElementById('fontSize');
      const textColor = document.getElementById('textColor');
      const fontWeight = document.getElementById('fontWeight');
      let textPosition = 'middle-center';

      // „Ç¢„Çπ„Éö„ÇØ„ÉàÊØî„Éú„Çø„É≥„ÅÆÂá¶ÁêÜ
      document.querySelectorAll('.aspect-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          // „Ç¢„ÇØ„ÉÜ„Ç£„Éñ„ÇØ„É©„Çπ„ÅÆÂàá„ÇäÊõø„Åà
          document.querySelectorAll('.aspect-btn').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          
          // ÂπÖ„ÇíÂü∫Ê∫ñ„Å´È´ò„Åï„ÇíË®àÁÆó
          const width = parseInt(widthInput.value) || 800;
          const ratio = btn.dataset.ratio;
          let newHeight;
          
          switch(ratio) {
            case '16:9':
              newHeight = Math.round(width * 9 / 16);
              break;
            case '4:3':
              newHeight = Math.round(width * 3 / 4);
              break;
            case '1:1':
              newHeight = width;
              break;
            case '3:4':
              newHeight = Math.round(width * 4 / 3);
              break;
            default:
              return;
          }
          
          heightInput.value = newHeight;
        });
      });

      // ÂπÖÂÖ•Âäõ„ÅåÂ§âÊõ¥„Åï„Çå„Åü„Å®„Åç„Å´„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Å™„Ç¢„Çπ„Éö„ÇØ„ÉàÊØî„ÇíÁ∂≠ÊåÅ
      widthInput.addEventListener('input', (e) => {
        const activeBtn = document.querySelector('.aspect-btn.active');
        if (activeBtn) {
          const width = parseInt(e.target.value) || 800;
          const ratio = activeBtn.dataset.ratio;
          let newHeight;
          
          switch(ratio) {
            case '16:9':
              newHeight = Math.round(width * 9 / 16);
              break;
            case '4:3':
              newHeight = Math.round(width * 3 / 4);
              break;
            case '1:1':
              newHeight = width;
              break;
            case '3:4':
              newHeight = Math.round(width * 4 / 3);
              break;
            default:
              return;
          }
          
          heightInput.value = newHeight;
        }
      });

      // È´ò„ÅïÂÖ•Âäõ„ÅåÊâãÂãï„ÅßÂ§âÊõ¥„Åï„Çå„Åü„Å®„Åç„ÅØ„Ç¢„Çπ„Éö„ÇØ„ÉàÊØî„Éú„Çø„É≥„ÅÆÈÅ∏Êäû„ÇíËß£Èô§
      heightInput.addEventListener('input', (e) => {
        document.querySelectorAll('.aspect-btn').forEach(b => b.classList.remove('active'));
      });

      // ËÉåÊôØ„Çø„Ç§„Éó„ÅÆÂàá„ÇäÊõø„Åà
      document.querySelectorAll('input[name="bgType"]').forEach(radio => {
        radio.addEventListener('change', (e) => {
          if (e.target.value === 'solid') {
            colorPickerWrapper.style.display = 'block';
            patternGroup.style.display = 'none';
          } else if (e.target.value === 'pattern') {
            colorPickerWrapper.style.display = 'none';
            patternGroup.style.display = 'block';
          } else {
            colorPickerWrapper.style.display = 'none';
            patternGroup.style.display = 'none';
          }
        });
      });

      // „ÉÜ„Ç≠„Çπ„Éà‰ΩçÁΩÆ„Éú„Çø„É≥„ÅÆÂá¶ÁêÜ
      document.querySelectorAll('.position-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          document.querySelectorAll('.position-btn').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          textPosition = btn.dataset.position;
        });
      });

      // „Ç∞„É©„Éá„Éº„Ç∑„Éß„É≥ÁîüÊàê
      function createGradient(ctx, width, height) {
        const gradient = ctx.createLinearGradient(0, 0, width, height);
        const colors = [
          ['#667eea', '#764ba2'],
          ['#f093fb', '#f5576c'],
          ['#4facfe', '#00f2fe'],
          ['#43e97b', '#38f9d7'],
          ['#fa709a', '#fee140'],
          ['#30cfd0', '#330867']
        ];
        const randomColors = colors[Math.floor(Math.random() * colors.length)];
        gradient.addColorStop(0, randomColors[0]);
        gradient.addColorStop(1, randomColors[1]);
        return gradient;
      }

      // „Éë„Çø„Éº„É≥ÊèèÁîª
      function drawPattern(ctx, width, height, patternType) {
        ctx.fillStyle = '#f0f0f0';
        ctx.fillRect(0, 0, width, height);

        switch (patternType) {
          case 'dots':
            ctx.fillStyle = '#667eea';
            for (let x = 0; x < width; x += 30) {
              for (let y = 0; y < height; y += 30) {
                ctx.beginPath();
                ctx.arc(x + 15, y + 15, 5, 0, Math.PI * 2);
                ctx.fill();
              }
            }
            break;

          case 'stripes':
            ctx.strokeStyle = '#667eea';
            ctx.lineWidth = 10;
            for (let i = -height; i < width + height; i += 40) {
              ctx.beginPath();
              ctx.moveTo(i, 0);
              ctx.lineTo(i + height, height);
              ctx.stroke();
            }
            break;

          case 'grid':
            ctx.strokeStyle = '#667eea';
            ctx.lineWidth = 2;
            for (let x = 0; x <= width; x += 40) {
              ctx.beginPath();
              ctx.moveTo(x, 0);
              ctx.lineTo(x, height);
              ctx.stroke();
            }
            for (let y = 0; y <= height; y += 40) {
              ctx.beginPath();
              ctx.moveTo(0, y);
              ctx.lineTo(width, y);
              ctx.stroke();
            }
            break;

          case 'waves':
            ctx.strokeStyle = '#667eea';
            ctx.lineWidth = 3;
            for (let y = 0; y < height; y += 30) {
              ctx.beginPath();
              for (let x = 0; x <= width; x += 5) {
                const waveY = y + Math.sin((x / width) * Math.PI * 4) * 10;
                if (x === 0) {
                  ctx.moveTo(x, waveY);
                } else {
                  ctx.lineTo(x, waveY);
                }
              }
              ctx.stroke();
            }
            break;

          case 'circles':
            ctx.strokeStyle = '#667eea';
            ctx.lineWidth = 2;
            for (let x = 0; x < width; x += 60) {
              for (let y = 0; y < height; y += 60) {
                ctx.beginPath();
                ctx.arc(x + 30, y + 30, 25, 0, Math.PI * 2);
                ctx.stroke();
              }
            }
            break;
        }
      }

      // „ÉÜ„Ç≠„Çπ„Éà„ÅÆ‰ΩçÁΩÆ„ÇíË®àÁÆó
      function getTextPosition(width, height, position) {
        const padding = 50;
        const positions = {
          'top-left': { x: padding, y: padding, align: 'left', baseline: 'top' },
          'top-center': { x: width / 2, y: padding, align: 'center', baseline: 'top' },
          'top-right': { x: width - padding, y: padding, align: 'right', baseline: 'top' },
          'middle-left': { x: padding, y: height / 2, align: 'left', baseline: 'middle' },
          'middle-center': { x: width / 2, y: height / 2, align: 'center', baseline: 'middle' },
          'middle-right': { x: width - padding, y: height / 2, align: 'right', baseline: 'middle' },
          'bottom-left': { x: padding, y: height - padding, align: 'left', baseline: 'bottom' },
          'bottom-center': { x: width / 2, y: height - padding, align: 'center', baseline: 'bottom' },
          'bottom-right': { x: width - padding, y: height - padding, align: 'right', baseline: 'bottom' }
        };
        return positions[position] || positions['middle-center'];
      }

      // ÁîªÂÉèÁîüÊàê
      function generateImage() {
        const width = parseInt(widthInput.value) || 800;
        const height = parseInt(heightInput.value) || 600;
        
        // „Ç≠„É£„É≥„Éê„Çπ„Çµ„Ç§„Ç∫Ë®≠ÂÆö
        canvas.width = width;
        canvas.height = height;
        
        // ËÉåÊôØ„Çø„Ç§„Éó„Å´Âøú„Åò„Å¶ÊèèÁîª
        const bgType = document.querySelector('input[name="bgType"]:checked').value;
        
        if (bgType === 'gradient') {
          ctx.fillStyle = createGradient(ctx, width, height);
          ctx.fillRect(0, 0, width, height);
        } else if (bgType === 'solid') {
          ctx.fillStyle = colorPicker.value;
          ctx.fillRect(0, 0, width, height);
        } else if (bgType === 'pattern') {
          drawPattern(ctx, width, height, patternSelect.value);
        }
        
        // „Ç´„Çπ„Çø„É†„ÉÜ„Ç≠„Çπ„Éà„ÅÆÊèèÁîª
        const text = customText.value.trim();
        if (text) {
          const size = parseInt(fontSize.value);
          const weight = fontWeight.value;
          const color = textColor.value;
          const pos = getTextPosition(width, height, textPosition);
          
          // „ÉÜ„Ç≠„Çπ„Éà„Çπ„Çø„Ç§„É´Ë®≠ÂÆö
          ctx.font = `${weight} ${size}px Arial, sans-serif`;
          ctx.fillStyle = color;
          ctx.textAlign = pos.align;
          ctx.textBaseline = pos.baseline;
          
          // Ë§áÊï∞Ë°å„ÅÆ„ÉÜ„Ç≠„Çπ„Éà„Å´ÂØæÂøú
          const lines = text.split('\n');
          const lineHeight = size * 1.2;
          
          lines.forEach((line, index) => {
            let y = pos.y;
            if (pos.baseline === 'top') {
              y = pos.y + (index * lineHeight);
            } else if (pos.baseline === 'middle') {
              y = pos.y - ((lines.length - 1) * lineHeight / 2) + (index * lineHeight);
            } else if (pos.baseline === 'bottom') {
              y = pos.y - ((lines.length - 1 - index) * lineHeight);
            }
            
            // ÂΩ±„ÇíËøΩÂä†„Åó„Å¶Ë™≠„Åø„ÇÑ„Åô„Åè„Åô„Çã
            ctx.shadowColor = 'rgba(0, 0, 0, 0.5)';
            ctx.shadowBlur = 4;
            ctx.shadowOffsetX = 2;
            ctx.shadowOffsetY = 2;
            ctx.fillText(line, pos.x, y);
            
            // ÂΩ±„Çí„É™„Çª„ÉÉ„Éà
            ctx.shadowColor = 'transparent';
            ctx.shadowBlur = 0;
            ctx.shadowOffsetX = 0;
            ctx.shadowOffsetY = 0;
          });
        } else {
          // „ÉÜ„Ç≠„Çπ„Éà„Åå„Å™„ÅÑÂ†¥Âêà„ÅØ„Çµ„Ç§„Ç∫ÊÉÖÂ†±„ÇíË°®Á§∫
          ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
          ctx.fillRect(width/2 - 100, height/2 - 30, 200, 60);
          
          ctx.font = 'bold 24px Arial';
          ctx.fillStyle = '#333';
          ctx.textAlign = 'center';
          ctx.textBaseline = 'middle';
          ctx.fillText(`${width} √ó ${height}`, width/2, height/2);
        }
        
        // „Ç≠„É£„É≥„Éê„ÇπË°®Á§∫
        canvasContainer.style.display = 'block';
        imageInfo.textContent = `ÁîüÊàê„Åï„Çå„ÅüÁîªÂÉè: ${width} √ó ${height} „Éî„ÇØ„Çª„É´`;
        
        // „ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„Éú„Çø„É≥„ÇíÊúâÂäπÂåñ
        downloadBtn.disabled = false;
      }

      // „ÉÄ„Ç¶„É≥„É≠„Éº„ÉâÊ©üËÉΩ
      function downloadImage() {
        canvas.toBlob((blob) => {
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          const width = canvas.width;
          const height = canvas.height;
          a.href = url;
          a.download = `image_${width}x${height}_${Date.now()}.png`;
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
          URL.revokeObjectURL(url);
        });
      }

      // „Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº
      generateBtn.addEventListener('click', generateImage);
      downloadBtn.addEventListener('click', downloadImage);

      // Enter„Ç≠„Éº„ÅßÁîüÊàê
      [widthInput, heightInput].forEach(input => {
        input.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') {
            generateImage();
          }
        });
      });
    </script>
  </body>
</html>